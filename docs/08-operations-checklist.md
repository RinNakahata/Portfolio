#  運用項目一覧 - AWS Portfolio Infrastructure

##  文書情報

- **作成日**: 2025-08-23
- **バージョン**: v1.0
- **適用環境**: AWS Portfolio Project
- **作成者**: Rin Nakahata
- **最終更新**: 2025-08-23

##  概要

本ドキュメントは、AWS Portfolio Infrastructureの運用において必要な監視項目、メンテナンス作業、セキュリティチェック項目を体系的に整理したものです。

**対象環境**: 本番環境（AWS）
**更新頻度**: 月次（運用実績に基づく）
**責任者**: インフラ担当者

---

##  **インフラ監視項目**

### **1. コンピューティング監視**

#### **ECS/Fargate**
- [ ] **サービス状態**
  - 実行中のタスク数
  - 希望するタスク数との差異
  - サービスの健全性
- [ ] **リソース使用量**
  - CPU使用率（目標: 80%以下）
  - メモリ使用率（目標: 80%以下）
  - ネットワークI/O
- [ ] **ログ監視**
  - CloudWatch Logsのエラー率
  - アプリケーションログの異常
  - ログストリームの状態

#### **Application Load Balancer**
- [ ] **ヘルスチェック**
  - ターゲットの健全性
  - ヘルスチェック失敗率
  - ターゲットグループの状態
- [ ] **パフォーマンス**
  - レイテンシー（目標: 100ms以下）
  - リクエスト数/秒
  - エラー率（目標: 1%以下）

### **2. データベース監視**

#### **DynamoDB**
- [ ] **テーブル状態**
  - テーブルのステータス
  - 読み取り/書き込み容量
  - スロットリング発生状況
- [ ] **パフォーマンス**
  - 読み取り/書き込みレイテンシー
  - コンシュームドキャパシティ
  - プロビジョニングされたキャパシティ

### **3. ストレージ監視**

#### **S3**
- [ ] **バケット状態**
  - オブジェクト数
  - ストレージサイズ
  - アクセスログ
- [ ] **パフォーマンス**
  - リクエストレイテンシー
  - エラー率
  - 帯域幅使用量

#### **CloudFront**
- [ ] **配信パフォーマンス**
  - キャッシュヒット率（目標: 90%以上）
  - オリジンエラー率
  - エッジロケーションの応答時間

### **4. ネットワーク監視**

#### **VPC**
- [ ] **ネットワーク状態**
  - サブネットのIPアドレス使用率
  - セキュリティグループの設定
  - NACLの設定
- [ ] **接続性**
  - インターネットゲートウェイの状態
  - NATゲートウェイの状態
  - VPCエンドポイントの状態

### **5. セキュリティ監視**

#### **IAM**
- [ ] **アクセス管理**
  - 未使用のIAMユーザー
  - 過度な権限を持つポリシー
  - アクセスキーのローテーション状況
- [ ] **監査ログ**
  - CloudTrailの有効化状況
  - 異常なアクセスパターン
  - 権限変更の履歴

#### **セキュリティグループ**
- [ ] **ファイアウォール設定**
  - 不要なポートの開放
  - 過度に広いCIDR範囲
  - セキュリティグループの参照関係

---

##  **定期メンテナンス作業**

### **1. 日次作業**

#### **朝の確認**
- [ ] 前日のアラート確認
- [ ] サービス状態の確認
- [ ] ログの異常確認
- [ ] コスト使用量の確認

#### **夕方の確認**
- [ ] 当日の運用状況確認
- [ ] アラートの状況確認
- [ ] 翌日の作業計画確認

### **2. 週次作業**

#### **月曜日**
- [ ] 週次運用報告書の作成
- [ ] 前週のインシデント振り返り
- [ ] 今週の作業計画策定

#### **金曜日**
- [ ] 週次運用状況の確認
- [ ] 次週の作業準備
- [ ] 週末の監視体制確認

### **3. 月次作業**

#### **月初**
- [ ] 前月の運用報告書作成
- [ ] 月次メトリクス分析
- [ ] コスト分析・最適化検討
- [ ] セキュリティ設定の見直し

#### **月末**
- [ ] 当月の運用実績確認
- [ ] 次月の作業計画策定
- [ ] 定期メンテナンスの実施
- [ ] バックアップ・復旧テスト

### **4. 四半期作業**

#### **四半期初**
- [ ] 四半期運用計画の策定
- [ ] パフォーマンス目標の見直し
- [ ] セキュリティ監査の実施
- [ ] 災害復旧計画の見直し

#### **四半期末**
- [ ] 四半期運用実績の評価
- [ ] 改善点の特定・対策策定
- [ ] 次四半期の計画策定
- [ ] 技術負債の棚卸し

---

##  **セキュリティチェック項目**

### **1. アクセス制御**

#### **IAM管理**
- [ ] **ユーザー管理**
  - アクティブユーザーの確認
  - 不要ユーザーの削除
  - 権限の最小化原則の適用
- [ ] **ポリシー管理**
  - ポリシーの定期的な見直し
  - 過度な権限の削除
  - 条件付きアクセスの設定

#### **ネットワークセキュリティ**
- [ ] **セキュリティグループ**
  - 不要なポートの閉鎖
  - ソースIPアドレスの制限
  - セキュリティグループの参照関係確認
- [ ] **NACL設定**
  - デフォルトルールの確認
  - カスタムルールの見直し
  - ログの有効化

### **2. データ保護**

#### **暗号化**
- [ ] **保存時暗号化**
  - S3バケットの暗号化設定
  - DynamoDBテーブルの暗号化
  - EBSボリュームの暗号化
- [ ] **転送時暗号化**
  - HTTPS/TLSの強制
  - CloudFrontのHTTPS設定
  - ALBのSSL証明書管理

#### **バックアップ・復旧**
- [ ] **バックアップ設定**
  - 自動バックアップの有効化
  - バックアップの暗号化
  - クロスリージョンバックアップ
- [ ] **復旧テスト**
  - 月次復旧テストの実施
  - 復旧手順書の更新
  - 復旧時間の測定

### **3. 監査・ログ**

#### **CloudTrail**
- [ ] **ログ設定**
  - 全リージョンでのログ記録
  - ログファイルの暗号化
  - ログの長期保存設定
- [ ] **監視・アラート**
  - 異常なアクティビティの検出
  - 権限変更の監視
  - ログイン失敗の監視

#### **CloudWatch**
- [ ] **メトリクス監視**
  - セキュリティ関連メトリクスの設定
  - 異常値の検出
  - アラートの設定
- [ ] **ログ監視**
  - セキュリティログの収集
  - ログの分析・検索
  - 異常パターンの検出

---

##  **監視ダッシュボード**

### **1. 運用ダッシュボード**

#### **主要メトリクス**
- ECSサービス状態
- ALBヘルスチェック状況
- DynamoDBパフォーマンス
- CloudFront配信状況

#### **アラート状況**
- アクティブアラート数
- 解決済みアラート数
- アラートの重要度分布

### **2. セキュリティダッシュボード**

#### **セキュリティ状況**
- IAMアクティビティ
- セキュリティグループ変更
- 異常なアクセスパターン
- セキュリティスキャン結果

---

##  **緊急時対応手順**

### **1. サービス停止時**
1. **状況確認**
   - 影響範囲の特定
   - 原因の調査
   - 復旧時間の見積もり

2. **対応実施**
   - 緊急復旧手順の実行
   - 関係者への連絡
   - ステータスページの更新

3. **事後対応**
   - 原因分析
   - 再発防止策の策定
   - 報告書の作成

### **2. セキュリティインシデント時**
1. **初期対応**
   - 影響範囲の特定
   - 証拠の保存
   - 関係者への連絡

2. **調査・対応**
   - 原因の特定
   - 影響の評価
   - 対策の実施

3. **事後対応**
   - 報告書の作成
   - 再発防止策の策定
   - 関係者への報告

---

##  **運用記録**

### **1. 日次記録**
- 日付
- 担当者
- 実施作業
- 発見事項
- 次回作業

### **2. 週次記録**
- 期間
- 主要な出来事
- 課題・問題
- 改善点
- 次週の計画

### **3. 月次記録**
- 月
- 運用実績
- インシデント状況
- 改善実施状況
- 次月の計画

---

##  **継続的改善**

### **1. 改善サイクル**
1. **現状把握**: 運用データの収集・分析
2. **課題特定**: 問題点・改善点の特定
3. **対策策定**: 改善策の検討・策定
4. **実施**: 改善策の実行
5. **効果測定**: 改善効果の測定・評価

### **2. 改善指標**
- **可用性**: 99.9%以上を目標
- **パフォーマンス**: レスポンス時間100ms以下
- **セキュリティ**: セキュリティインシデント0件
- **コスト**: 予算内での運用

---

##  **関連ドキュメント**

- `docs/01-architecture.md` - システムアーキテクチャ
- `docs/06-infrastructure-design.md` - インフラ設計
- `docs/07-security-design.md` - セキュリティ設計
- `docs/09-management-ledger.md` - 管理台帳
- `docs/10-operations-report.md` - 運用報告書

---

