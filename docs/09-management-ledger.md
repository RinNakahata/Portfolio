#  管理台帳

##  文書情報

- **作成日**: 2025-08-23
- **バージョン**: v1.0
- **作成者**: Rin Nakahata
- **最終更新**: 2025-08-23

##  概要

本ドキュメントは、AWS Portfolio Infrastructureの運用管理において必要な各種台帳、テンプレート、履歴管理を体系的に整理したものです。

**対象環境**: 本番環境（AWS）
**更新頻度**: 随時更新
**責任者**: インフラ担当者

---

##  **インシデント管理台帳**

### **インシデント記録テンプレート**

#### **基本情報**
- **インシデントID**: INC-YYYYMMDD-XXX
- **発生日時**: YYYY-MM-DD HH:MM
- **発見者**: [担当者名]
- **報告日時**: YYYY-MM-DD HH:MM
- **重要度**: 高/中/低

#### **インシデント詳細**
- **概要**: [簡潔な説明]
- **影響範囲**: [影響を受けるサービス・ユーザー]
- **症状**: [具体的な症状・エラーメッセージ]
- **原因**: [推定される原因]

#### **対応状況**
- **対応者**: [担当者名]
- **対応開始**: YYYY-MM-DD HH:MM
- **対応完了**: YYYY-MM-DD HH:MM
- **対応内容**: [実施した対応の詳細]
- **復旧確認**: [復旧確認方法・結果]

#### **事後対応**
- **根本原因**: [特定された根本原因]
- **再発防止策**: [実施する対策]
- **教訓**: [得られた教訓・改善点]
- **次回対応**: [次回の対応改善点]

### **インシデント管理フロー**

#### **1. 発見・報告**
1. インシデントの発見
2. 初期状況の確認
3. 関係者への報告
4. インシデント記録の作成

#### **2. 初期対応**
1. 影響範囲の特定
2. 緊急対応の実施
3. 状況の安定化
4. 詳細調査の開始

#### **3. 調査・分析**
1. 原因の特定
2. 影響の評価
3. 対策の検討
4. 復旧手順の策定

#### **4. 復旧・解決**
1. 復旧作業の実施
2. 動作確認
3. 関係者への報告
4. 事後対応の実施

---

##  **変更管理台帳**

### **変更申請テンプレート**

#### **基本情報**
- **変更ID**: CHG-YYYYMMDD-XXX
- **申請日**: YYYY-MM-DD
- **申請者**: [担当者名]
- **変更タイプ**: 緊急/通常/計画
- **影響度**: 高/中/低

#### **変更内容**
- **変更概要**: [変更の目的・内容]
- **変更対象**: [変更するリソース・サービス]
- **変更理由**: [変更が必要な理由]
- **期待効果**: [期待される効果]

#### **実施計画**
- **実施日時**: YYYY-MM-DD HH:MM
- **実施者**: [担当者名]
- **実施時間**: [予想される実施時間]
- **ロールバック計画**: [失敗時の復旧手順]

#### **承認・実施**
- **承認者**: [承認者名]
- **承認日**: YYYY-MM-DD
- **実施結果**: [実施結果・成功/失敗]
- **事後確認**: [動作確認結果]

### **変更履歴管理**

#### **変更履歴テーブル**
| 変更ID | 日付 | 変更内容 | 変更者 | 影響度 | 結果 |
|--------|------|----------|--------|--------|------|
| CHG-001 | 2025-08-25 | 初期環境構築 | Rin Nakahata | 高 | 成功 |
| CHG-002 | 2025-08-26 | セキュリティ設定強化 | Rin Nakahata | 中 | 予定 |

---

##  **構成管理台帳**

### **インフラ構成一覧**

#### **VPC構成**
- **VPC ID**: vpc-xxxxxxxxx
- **CIDR**: 10.0.0.0/16
- **リージョン**: ap-northeast-1
- **サブネット数**: 4（パブリック2、プライベート2）
- **作成日**: 2025-08-25

#### **ECS構成**
- **クラスター名**: portfolio-cluster
- **サービス名**: portfolio-api-service
- **タスク定義**: portfolio-api
- **CPU**: 256 (.25 vCPU)
- **メモリ**: 512 MB
- **希望タスク数**: 2

#### **データベース構成**
- **DynamoDBテーブル**:
  - users: portfolio-users
  - metrics: portfolio-metrics
- **バックアップ**: 有効
- **暗号化**: AES256

#### **ストレージ構成**
- **S3バケット**: portfolio-static-website-xxxxxxxx
- **CloudFront**: portfolio-cloudfront
- **静的サイト**: 有効

### **設定値管理**

#### **環境変数**
- **AWS_REGION**: ap-northeast-1
- **ENVIRONMENT**: production
- **DEBUG**: false
- **LOG_LEVEL**: INFO

#### **セキュリティ設定**
- **セキュリティグループ**: 3個
- **IAMロール**: 2個
- **CloudTrail**: 有効
- **CloudWatch**: 有効

---

##  **定期作業管理台帳**

### **日次作業チェックリスト**

#### **朝の確認**
- [ ] 前日のアラート確認
- [ ] サービス状態確認
- [ ] ログ異常確認
- [ ] コスト使用量確認

#### **夕方の確認**
- [ ] 当日の運用状況確認
- [ ] アラート状況確認
- [ ] 翌日の作業計画確認

### **週次作業チェックリスト**

#### **月曜日**
- [ ] 週次運用報告書作成
- [ ] 前週のインシデント振り返り
- [ ] 今週の作業計画策定

#### **金曜日**
- [ ] 週次運用状況確認
- [ ] 次週の作業準備
- [ ] 週末の監視体制確認

### **月次作業チェックリスト**

#### **月初**
- [ ] 前月の運用報告書作成
- [ ] 月次メトリクス分析
- [ ] コスト分析・最適化検討
- [ ] セキュリティ設定見直し

#### **月末**
- [ ] 当月の運用実績確認
- [ ] 次月の作業計画策定
- [ ] 定期メンテナンス実施
- [ ] バックアップ・復旧テスト

---

##  **監査・ログ管理台帳**

### **CloudTrail監査ログ**

#### **アクセスログ**
- **記録期間**: 90日
- **記録内容**: 全API呼び出し
- **暗号化**: 有効
- **保存場所**: S3

#### **監査項目**
- [ ] IAM変更履歴
- [ ] セキュリティグループ変更
- [ ] リソース作成・削除
- [ ] 権限変更

### **CloudWatchログ**

#### **ロググループ**
- **ECSログ**: /aws/ecs/portfolio-api
- **保持期間**: 30日
- **暗号化**: 有効

#### **監視項目**
- [ ] エラーログ
- [ ] パフォーマンスログ
- [ ] セキュリティログ
- [ ] アクセスログ

---

##  **パフォーマンス管理台帳**

### **SLA管理**

#### **可用性目標**
- **目標**: 99.9%
- **測定方法**: CloudWatchメトリクス
- **報告頻度**: 月次

#### **パフォーマンス目標**
- **レスポンス時間**: 100ms以下
- **スループット**: 1000 req/sec以上
- **エラー率**: 1%以下

### **メトリクス監視**

#### **ECSメトリクス**
- **CPU使用率**: 80%以下
- **メモリ使用率**: 80%以下
- **ネットワークI/O**: 監視中

#### **ALBメトリクス**
- **レイテンシー**: 100ms以下
- **リクエスト数**: 監視中
- **エラー率**: 1%以下

---

##  **コスト管理台帳**

### **月次コスト分析**

#### **サービス別コスト**
- **ECS Fargate**: $XX.XX
- **ALB**: $XX.XX
- **DynamoDB**: $XX.XX
- **S3**: $XX.XX
- **CloudFront**: $XX.XX
- **CloudWatch**: $XX.XX

#### **コスト最適化**
- [ ] 未使用リソースの削除
- [ ] リソースサイズの最適化
- [ ] 予約インスタンスの検討
- [ ] スポットインスタンスの活用

---

##  **関連ドキュメント**

- `docs/08-operations-checklist.md` - 運用項目一覧
- `docs/10-operations-report.md` - 運用報告書
- `docs/11-troubleshooting-guide.md` - トラブルシューティングガイド

---

